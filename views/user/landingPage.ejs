<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Landing Page</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/css/header.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- 3D Model Viewer -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>

<body>

    <!-- üîπ Normal Header (not partial) -->
    <header>
        <div class="mainhead">
            <img src="/images/colinguest.png" class="imageLogo" alt="Logo">
            <div class="buttons">
             
                <a href="/wishlist" class="header-icon" aria-label="Wishlist" title="Wishlist">
                    <i class="fas fa-heart"></i>
                </a>
                <a href="/cart" class="header-icon" aria-label="Cart" title="Cart">
                    <i class="fas fa-cart-shopping"></i>
                </a>
                <% if (user) { %>
                <div class="user-menu">
                    <button id="userMenuToggle" class="user-toggle">
                      
                        <span><%= user.fullName %></span>
                      
                    </button>
                
                    <div id="userDropdown" class="user-dropdown" aria-hidden="true">
                       
                        <a href="/profile"><i class="fas fa-user"></i> <span>Profile</span></a>
                        <a href="/orders"><i class="fas fa-bag-shopping"></i> <span>My Orders</span></a>
                        <a href="/wallet"><i class="fas fa-wallet"></i> <span>My Wallet</span></a>
                        <hr>
                        <a href="/logout" class="logout"><i class="fas fa-right-from-bracket"></i> <span>Logout</span></a>
                    </div>
                </div>
                <% } else { %>
                    <a href="/login">Login</a>
                <% } %>
            </div>
        </div>
        <div class="subhead">
            <nav>
                <ul>
                    <li>Home</li>
                    <a href="/productListing">
                        <li>Shop</li>
                    </a>
                    <a href="/customListing">
                        <li>Custom</li>
                    </a>
                    <a href="/about">
                        <li>About</li>
                    </a>
                    <a href="/contact">
                        <li>Contact</li>
                    </a>
                </ul>
            </nav>
        </div>

    </header>

    <!-- üîπ Main Content -->
    <main>
        <div id="banner">
            <div id="banner1">
                <p>"Unleash your creativity‚Äîturn your unique designs into amazing products!"</p>
                <img src="/images/banner1.png" alt="">
            </div>
            <div id="banner2">
                <img src="/images/colinguest.png" alt="gbt" id="imgLogo">
                <p>"Your Offer, Your Time!‚Äù Lock exclusive deals and claim them even after they're gone!<br>
                    - Coming Soon... !
                </p>
            </div>
        </div>

        <div id="shop">
            <div id="shopText">
                <div class="textline"></div>
                <p>Your one-stop shop everything you need,<br>
                    just a click away!
                </p>
                <div class="text2line"></div>
            </div>

            <style>
                .categoryIcon ul { list-style: none; display: flex; gap: 180px; justify-content: center; padding: 0; flex-wrap: wrap; row-gap: 64px; }
                .categoryIcon li a { display: inline-flex; flex-direction: column; align-items: center; text-decoration: none; color: inherit; }
                .categoryIcon li img { display: block; height: 68px; width: auto; object-fit: contain; }
                .categoryIcon .cat-label { margin-top: 10px; font-weight: 700; letter-spacing: 1px; font-size: 12px; text-transform: uppercase; color: #1f2937; }
                @media (max-width: 768px){ .categoryIcon ul { gap: 64px; row-gap: 40px; } }
            </style>
            <div class="categoryIcon">
                <ul>
                    <li>
                        <a href="/productListing?category=UNISEX">
                            <img src="/images/banner2.png" alt="UNISEX">
                            <span class="cat-label">UNISEX</span>
                        </a>
                    </li>
                    <li>
                        <a href="/productListing?category=WOMEN%27S">
                            <img src="/images/banner3.png" alt="WOMEN'S">
                            <span class="cat-label">WOMEN'S</span>
                        </a>
                    </li>
                    <li>
                        <a href="/productListing?category=MEN%27S">
                            <img src="/images/banner4.png" alt="MEN'S">
                            <span class="cat-label">MEN'S</span>
                        </a>
                    </li>
                    <li>
                        <a href="/productListing?category=FORMAL%27S">
                            <img src="/images/banner5.png" alt="FORMAL'S">
                            <span class="cat-label">FORMAL'S</span>
                        </a>
                    </li>
                    <li>
                        <a href="/productListing?category=CASUAL%27S">
                            <img src="/images/banner6.png" alt="CASUAL'S">
                            <span class="cat-label">CASUAL'S</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="trendingText">
                <div class="point"></div>
                <p>TRENDING</p>
            </div>

            <div id="shopProductSection">
                <% (products || []).forEach(function(p){ %>
                    <div class="product">
                        <div class="product-image">
                            <img src="<%= (p.productImage && p.productImage[0]) ? p.productImage[0] : '/images/banner7.png' %>" alt="<%= p.productNmae || 'Product' %>">
                        </div>
                        <div class="product-details">
                            <p><%= p.productNmae || '-' %></p>
                            <p class="price">
                                <span class="original-price">Rs. <%= (p.reqularPrice || 0).toFixed ? p.reqularPrice.toFixed(2) : p.reqularPrice %></span>
                                <% if (p.salePrice && Number(p.salePrice) > 0 && Number(p.salePrice) < Number(p.reqularPrice || 0)) { %>
                                    <span class="discount-price">Rs. <%= Number(p.salePrice).toFixed(2) %></span>
                                <% } %>
                            </p>
                        </div>
                    </div>
                <% }) %>
                <% if (!products || products.length === 0) { %>
                    <p class="text-muted">No products to show yet.</p>
                <% } %>
            </div>

            <div class="shopButton">
                <a href="/productListing" style="text-decoration: none;">
                    <button type="submit">Explore Fashion ></button>
                </a>
            </div>
        </div>

        <div id="custom">
            <div id="shopText">
                <div class="textline"></div>
                <p>Your Way, Your Style.<br>
                    Upload your image and customize the product effortlessly. Personalization made simple, right on your
                    website - U-Craft.
                </p>
                <div class="text2line"></div>
            </div>

            <div id="customProductSection">
                <!-- Product 1 -->
                <div class="customProduct">
                    <div class="pointText">
                        <div class="point"></div>
                        <p>T-SHIRT</p>
                    </div>
                    <div class="product-image">
                        <img src="/images/banner8.png" alt="Custom T-Shirt">
                    </div>
                    <div class="product-details">
                        <p class="price">
                            <span class="original-price">Rs. 1,299.00</span>
                            <span class="discount-price">Rs. 999.00</span>
                        </p>
                    </div>
                </div>

                <!-- Product 2 -->
                <div class="customProductMain">
                    <div class="pointText">
                        <div class="point"></div>
                        <p>HOODIE'S</p>
                    </div>
                    <div class="product-image">
                        <div class="model-container">
                            <img src="/images/image 116.png" alt="Custom Hoodie">
                            <model-viewer id="modelViewer" class="model"
                                src="/models/Fashion_Duo_0401103937_texture.glb" alt="3D Model" auto-rotate
                                camera-controls>
                            </model-viewer>
                        </div>
                    </div>
                    <div class="product-details">
                        <p class="price">
                            <span class="original-price">Rs. 2,999.00</span>
                            <span class="discount-price">Rs. 2,399.00</span>
                        </p>
                    </div>
                </div>

                <!-- Product 3 -->
                <div class="customProduct">
                    <div class="pointText">
                        <div class="point"></div>
                        <p>SLEEVELESS</p>
                    </div>
                    <div class="product-image">
                        <img src="/images/banner8.png" alt="Custom Sleeveless">
                    </div>
                    <div class="product-details">
                        <p class="price">
                            <span class="original-price">Rs. 1,599.00</span>
                            <span class="discount-price">Rs. 1,199.00</span>
                        </p>
                    </div>
                </div>
            </div>

            <div class="customShopButton">
                <button type="submit">Get Into Custom World ></button>
            </div>
        </div>
    </main>

    <!-- üîπ Normal Footer -->
    <%-include("../../views/partials/user/footer")%>

</body>

</html>
<script>
    // User dropdown toggle and outside-click handling
    document.addEventListener('click', (e) => {
        const toggle = document.getElementById('userMenuToggle');
        const dropdown = document.getElementById('userDropdown');
        if (!toggle || !dropdown) return;

        if (toggle.contains(e.target)) {
            dropdown.classList.toggle('open');
            dropdown.setAttribute('aria-hidden', dropdown.classList.contains('open') ? 'false' : 'true');
        } else if (!dropdown.contains(e.target)) {
            dropdown.classList.remove('open');
            dropdown.setAttribute('aria-hidden', 'true');
        }
    });

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown) {
                dropdown.classList.remove('open');
                dropdown.setAttribute('aria-hidden', 'true');
            }
        }
    });
</script>